# Reglas del Proyecto - Mi Despensa (Inventario FODEM)

## ğŸ¯ Objetivo del Proyecto
AplicaciÃ³n hÃ­brida para gestiÃ³n de inventario que funciona en mÃ³vil (iOS/Android) y web, con sincronizaciÃ³n en tiempo real y gestiÃ³n de usuarios.

## ğŸ—ï¸ Arquitectura

### Clean Architecture
- **Core**: Reglas de negocio, entidades, casos de uso
- **Data**: ImplementaciÃ³n de repositorios, fuentes de datos
- **Presentation**: UI, componentes, navegaciÃ³n
- **Shared**: Utilidades, constantes, tipos

### Estructura de Carpetas
```
src/
â”œâ”€â”€ app/                    # Expo Router (navegaciÃ³n)
â”œâ”€â”€ core/                   # Reglas de negocio
â”‚   â”œâ”€â”€ entities/          # Entidades del dominio
â”‚   â”œâ”€â”€ usecases/          # Casos de uso
â”‚   â””â”€â”€ repositories/      # Interfaces de repositorios
â”œâ”€â”€ data/                   # Capa de datos
â”‚   â”œâ”€â”€ datasources/       # Fuentes de datos (Supabase)
â”‚   â”œâ”€â”€ repositories/      # ImplementaciÃ³n de repositorios
â”‚   â””â”€â”€ models/            # Modelos de datos
â”œâ”€â”€ presentation/           # Capa de presentaciÃ³n
â”‚   â”œâ”€â”€ screens/           # Pantallas
â”‚   â”œâ”€â”€ components/        # Componentes reutilizables
â”‚   â”œâ”€â”€ navigation/        # ConfiguraciÃ³n de navegaciÃ³n
â”‚   â””â”€â”€ hooks/             # Custom hooks
â””â”€â”€ shared/                 # Utilidades compartidas
    â”œâ”€â”€ constants/
    â”œâ”€â”€ utils/
    â””â”€â”€ types/
```

## ğŸ› ï¸ TecnologÃ­as

### Frontend HÃ­brido
- **React Native + Expo**: Base para mÃ³vil
- **React Native Web**: Compatibilidad web
- **Expo Router**: NavegaciÃ³n universal
- **Tamagui**: UI library hÃ­brida
- **TypeScript**: Tipado estÃ¡tico

### Backend
- **Supabase**: Base de datos PostgreSQL, autenticaciÃ³n, storage, real-time

### Estilos
- **Tailwind CSS**: Para web
- **React Native Styles**: Para mÃ³vil
- **Tamagui**: Componentes hÃ­bridos

## ğŸ“‹ Reglas de Desarrollo

### 1. Nomenclatura
- **Archivos**: PascalCase para componentes, camelCase para utilidades
- **Carpetas**: camelCase
- **Variables**: camelCase
- **Constantes**: UPPER_SNAKE_CASE
- **Interfaces**: PascalCase con prefijo I (ej: IProduct)
- **Tipos**: PascalCase

### 2. Componentes
- Un componente por archivo
- Props tipadas con TypeScript
- Componentes hÃ­bridos que funcionen en mÃ³vil y web
- Usar Platform.OS para diferencias entre plataformas

### 3. NavegaciÃ³n
- Usar Expo Router para navegaciÃ³n universal
- Configurar modales con `presentation: 'modal'`
- Evitar navegaciÃ³n anidada compleja
- Usar Link para navegaciÃ³n declarativa

### 4. Estado
- Zustand para estado global
- React Query para sincronizaciÃ³n con Supabase
- Estado local en componentes cuando sea apropiado

### 5. Estilos
- **MÃ³vil**: React Native StyleSheet
- **Web**: Tailwind CSS
- **HÃ­brido**: Tamagui cuando sea posible
- Usar Platform.OS para diferencias de estilos

### 6. Base de Datos
- Usar Supabase como Ãºnica fuente de datos
- Implementar RLS (Row Level Security)
- Usar real-time subscriptions para actualizaciones
- Manejar errores de conexiÃ³n

### 7. AutenticaciÃ³n
- Supabase Auth para autenticaciÃ³n
- Manejar estados de autenticaciÃ³n
- Proteger rutas sensibles
- Almacenar tokens de forma segura

### 8. Funcionalidades Principales

#### Inventario
- CRUD de productos
- CategorizaciÃ³n
- Control de stock
- Alertas de stock bajo

#### Escaneo
- CÃ³digos de barras
- QR codes
- Captura de fotos
- Reconocimiento de productos

#### Usuarios
- Registro/Login
- Perfiles de usuario
- Permisos por rol
- Invitaciones

#### Notificaciones
- Stock bajo
- Productos vencidos
- Actualizaciones en tiempo real

## ğŸš¨ Problemas a Evitar

### NavegaciÃ³n
- NO usar navegaciÃ³n anidada compleja
- NO cerrar la app al presionar "atrÃ¡s" en modales
- SIEMPRE usar Expo Router para navegaciÃ³n

### Rendimiento
- NO hacer re-renders innecesarios
- USAR React.memo para componentes pesados
- IMPLEMENTAR lazy loading para listas grandes

### Seguridad
- NO exponer claves de API en el cÃ³digo
- USAR variables de entorno
- IMPLEMENTAR validaciÃ³n de datos

### Compatibilidad
- SIEMPRE probar en mÃ³vil y web
- USAR Platform.OS para diferencias
- MANTENER un solo cÃ³digo base

## ğŸ“± Funcionalidades EspecÃ­ficas

### Productos
```typescript
interface IProduct {
  id: string;
  name: string;
  description?: string;
  category: string;
  stock: number;
  minStock: number;
  price?: number;
  barcode?: string;
  imageUrl?: string;
  createdAt: Date;
  updatedAt: Date;
}
```

### Usuarios
```typescript
interface IUser {
  id: string;
  email: string;
  name: string;
  role: 'admin' | 'user';
  organizationId: string;
  createdAt: Date;
}
```

### Organizaciones
```typescript
interface IOrganization {
  id: string;
  name: string;
  description?: string;
  ownerId: string;
  createdAt: Date;
}
```

## ğŸ”§ ConfiguraciÃ³n

### Variables de Entorno
```env
EXPO_PUBLIC_SUPABASE_URL=tu_url
EXPO_PUBLIC_SUPABASE_ANON_KEY=tu_key
```

### Supabase
- Configurar RLS policies
- Crear tablas con relaciones
- Configurar real-time subscriptions
- Implementar autenticaciÃ³n

## ğŸ“¦ Scripts
- `npm start`: Desarrollo
- `npm run android`: Android
- `npm run ios`: iOS
- `npm run web`: Web
- `npm run build`: ProducciÃ³n

## ğŸ¨ UI/UX Guidelines
- DiseÃ±o limpio y minimalista
- Colores consistentes (primary: #0ea5e9)
- TipografÃ­a legible
- Espaciado consistente
- Feedback visual para acciones
- Estados de carga y error

## ğŸ§ª Testing
- Componentes principales
- Funcionalidades crÃ­ticas
- NavegaciÃ³n
- IntegraciÃ³n con Supabase
- Compatibilidad mÃ³vil/web 